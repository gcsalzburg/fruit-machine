<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Fruit Machine</title>

   <link rel="stylesheet" href="styles.css">
</head>

<body>

   <main>
      <section id="fruit_machine" class="fruit_machine">

         <h1 id="fm_title" class="fm_title">...</h1>

         <div class="gif_positioned background"></div>
         <div class="gif_positioned pig"></div>
         <div class="gif_positioned radar"></div>
         <a id="link_pig" href="#plugin" class="gif_positioned link_pig"></a>
         <a id="link_start" href="#start" class="gif_positioned link_start"></a>

         <section id="slots" class="slots">
            <div class="window window_0">
               <div id="reel_0" class="reel"></div>
            </div>
            <div class="window window_1">
               <div id="reel_1" class="reel"></div>
            </div>
            <div class="window window_2">
               <div id="reel_2" class="reel"></div>
            </div>
         </section>

      </section>
   </main>

   <script src="js/Reel.js"></script>
   <script src="js/game.js"></script>

   <script>
      // Change defaults below if needed
      // Images should be in the folder shown, named 0.jpg, 1.jpg, 2.jpg etc...
      let title = "Fruit Machine";
      let slot_img_folder = "slot_images/"; // end in a forward slash

      // Common vars
      const img_height = 171;
      let total_height = 0;
      let num_images = 0;

      // Create reels
      const reels= [
         new Reel(document.getElementById("reel_0"), 'images/arrow.png'),
         new Reel(document.getElementById("reel_1"), 'images/arrow.png'),
         new Reel(document.getElementById("reel_2"), 'images/arrow.png'),
      ];
      
      const fruit_machine = document.getElementById("fruit_machine");

      // Handlers for button pushes
      document.getElementById("link_pig").onclick = function(e) {
         e.preventDefault();
         fruit_machine.classList.toggle("is_pluggedin");
      };
      
      document.getElementById("link_start").onclick = function(e){
         e.preventDefault();
         this.blur(); // Remove image background of depressed button

         if( fruit_machine.classList.contains("is_pluggedin") && !fruit_machine.classList.contains("is_running")){
            fruit_machine.classList.add("is_running");
            roll(1.6);
         }
      }
      
      let last_frame_timestamp = 0; // The last time the loop was run
      requestAnimationFrame(game_loop);
      create_fruit_machine();

   </script>
</body>
</html>